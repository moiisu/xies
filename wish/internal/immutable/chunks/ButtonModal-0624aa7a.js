import{L as M,D as j}from"./app-stores-9073b00a.js";import{c as A}from"./api-cookie-e261ada1.js";import{S as H,i as N,s as U,k as b,a as L,l as g,m as v,c as O,h as r,n as d,F as B,b as k,G as T,O as V,Y as q,f as w,t as I,P as F,N as P,$ as S,al as z,A as p,q as Y,r as C,u as G,E as J,H as Q,I as R,J as W}from"./index-ba3787f6.js";import{Y as X}from"./runtime.esm-ee3b0ca4.js";const Z=async i=>{const t=new TextEncoder().encode(i),e=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(e)).map(l=>l.toString(16).padStart(2,"0")).join("")},x=async()=>{const i=new Date().toISOString(),t=await fetch(`https://gist.githubusercontent.com/AguzzTN54/3816708e01827a5c64f4903242ede7b0/raw?date=${i}`),{hash:e,previousKey:s}=await t.json();return{baseKey:e,previousKey:s}},D=async i=>{const{baseKey:t,previousKey:e}=await x(),s=await Z(i?.trim()),a=t===s,l=a?"none":e[s]||null;return{isKeyValid:a,expiryDate:l}},$={_set(i){const t=i.trim().split("").reverse().join("");A.set("accessKey",t)},clear(){return A.set("accessKey",null)},async initialLoad(){const i=A.get("accessKey"),t=i?.split("").reverse().join("");try{if(!i)return{validity:!1,storedKey:t,status:"ok"};const{isKeyValid:e,expiryDate:s}=await D(t);return{validity:e,expiryDate:s,storedKey:t,status:"ok"}}catch{return{validity:!1,storedKey:t,status:"offline"}}},async verify(i){try{const{isKeyValid:t,expiryDate:e}=await D(i);return t&&this._set(i),{validity:t,msg:t?"success":e&&e!=="none"?"menu.keyExpired1":"menu.invalidKey"}}catch{return{validity:!1,msg:"connectionFailed"}}}},tt=()=>{console.log("reconecting...");const i=setTimeout(()=>{clearTimeout(i),et()},1e4)},et=async()=>{const{validity:i,status:t}=await $.initialLoad();if(t==="offline")return tt();M.set(!!i),j.set(!i)};function st(i){let t;return{c(){t=b("i"),this.h()},l(e){t=g(e,"I",{class:!0}),v(t).forEach(r),this.h()},h(){d(t,"class","gi-times svelte-1sz47b8")},m(e,s){k(e,t,s)},p,d(e){e&&r(t)}}}function it(i){let t;return{c(){t=b("i"),this.h()},l(e){t=g(e,"I",{class:!0}),v(t).forEach(r),this.h()},h(){d(t,"class","gi-circle-o svelte-1sz47b8")},m(e,s){k(e,t,s)},p,d(e){e&&r(t)}}}function at(i){let t,e;return{c(){t=b("i"),this.h()},l(s){t=g(s,"I",{class:!0}),v(t).forEach(r),this.h()},h(){d(t,"class",e="gi-"+i[5]+" svelte-1sz47b8")},m(s,a){k(s,t,a)},p(s,a){a&32&&e!==(e="gi-"+s[5]+" svelte-1sz47b8")&&d(t,"class",e)},d(s){s&&r(t)}}}function nt(i){let t,e=(i[1]||(i[0]==="confirm"?i[6]("confirmButton"):i[6]("cancelButton")))+"",s;return{c(){t=b("span"),s=Y(e)},l(a){t=g(a,"SPAN",{});var l=v(t);s=C(l,e),l.forEach(r)},m(a,l){k(a,t,l),T(t,s)},p(a,l){l&67&&e!==(e=(a[1]||(a[0]==="confirm"?a[6]("confirmButton"):a[6]("cancelButton")))+"")&&G(s,e)},i:p,o:p,d(a){a&&r(t)}}}function lt(i){let t;const e=i[10].default,s=J(e,i,i[9],null);return{c(){s&&s.c()},l(a){s&&s.l(a)},m(a,l){s&&s.m(a,l),t=!0},p(a,l){s&&s.p&&(!t||l&512)&&Q(s,e,a,a[9],t?W(e,a[9],l,null):R(a[9]),null)},i(a){t||(w(s,a),t=!0)},o(a){I(s,a),t=!1},d(a){s&&s.d(a)}}}function ct(i){let t,e,s,a,l,u,h,y;function _(n,o){return n[5]?at:n[0]==="confirm"?it:st}let f=_(i),c=f(i);const K=[lt,nt],m=[];function E(n,o){return n[7]?0:1}return s=E(i),a=m[s]=K[s](i),{c(){t=b("button"),c.c(),e=L(),a.c(),this.h()},l(n){t=g(n,"BUTTON",{style:!0,class:!0});var o=v(t);c.l(o),e=O(o),a.l(o),o.forEach(r),this.h()},h(){t.disabled=i[2],d(t,"style",l=i[4]?`width:${i[4]}`:""),d(t,"class","svelte-1sz47b8"),B(t,"light",i[3])},m(n,o){k(n,t,o),c.m(t,null),T(t,e),m[s].m(t,null),u=!0,h||(y=V(t,"click",q(i[8])),h=!0)},p(n,[o]){f===(f=_(n))&&c?c.p(n,o):(c.d(1),c=f(n),c&&(c.c(),c.m(t,e))),a.p(n,o),(!u||o&4)&&(t.disabled=n[2]),(!u||o&16&&l!==(l=n[4]?`width:${n[4]}`:""))&&d(t,"style",l),o&8&&B(t,"light",n[3])},i(n){u||(w(a),u=!0)},o(n){I(a),u=!1},d(n){n&&r(t),c.d(),m[s].d(),h=!1,y()}}}function ot(i,t,e){let s;F(i,X,n=>e(6,s=n));let{$$slots:a={},$$scope:l}=t;const u=t.$$slots;let{type:h="confirm"}=t,{text:y=""}=t,{disabled:_=!1}=t,{light:f=!1}=t,{width:c=""}=t,{icon:K=""}=t;const m=P(),E=()=>m("click");return i.$$set=n=>{e(12,t=S(S({},t),z(n))),"type"in n&&e(0,h=n.type),"text"in n&&e(1,y=n.text),"disabled"in n&&e(2,_=n.disabled),"light"in n&&e(3,f=n.light),"width"in n&&e(4,c=n.width),"icon"in n&&e(5,K=n.icon),"$$scope"in n&&e(9,l=n.$$scope)},t=z(t),[h,y,_,f,c,K,s,u,E,l,a]}class ht extends H{constructor(t){super(),N(this,t,ot,ct,U,{type:0,text:1,disabled:2,light:3,width:4,icon:5})}}export{ht as B,$ as a,et as v};
